CREATE TABLE CUSTOMER_MGR
(
CUS_ID         NUMBER(6)     CONSTRAINTS CUSTOMER_ID_PK PRIMARY KEY,
CUS_NAME       VARCHAR2(30)  CONSTRAINTS CUSTOMER_NAME_NN NOT NULL,
CUS_PHONE      VARCHAR2(30)  CONSTRAINTS CUSTOMER_PHONE_NN NOT NULL,
CUS_DATE       DATE          CONSTRAINTS CUSTOMER_DATE_NN NOT NULL,
CUS_GENDER     VARCHAR2(6)
);

ALTER TABLE CUSTOMER_MGR
ADD CONSTRAINT CUS_GENDER_CH CHECK (CUS_GENDER IN ('M', 'F'));

//ID_NUM_MGR 시퀀스명

CREATE SEQUENCE ID_NUM_MGR
MINVALUE 1      
MAXVALUE 9999999999
INCREMENT BY 1      
START WITH 1000      
NOCACHE      
NOORDER      
NOCYCLE; 

SELECT SEQUENCE_NAME, MIN_VALUE, MAX_VALUE, INCREMENT_BY, CYCLE_FLAG
FROM USER_SEQUENCES; 

INSERT INTO CUSTOMER_MGR(CUS_ID, CUS_NAME, CUS_PHONE, CUS_DATE, CUS_GENDER)
VALUES (ID_NUM_MGR.NEXTVAL, 'ALLEN', '010-9430-3477', SYSDATE, 'M');

/*
TRUNCATE TABLE CUSTOMER_MGR;

DROP SEQUENCE ID_NUM_MGR;

DROP TABLE CUSTOMER_MGR;

*/

CREATE TABLE ACCOUNT_TABLE
(
ACC_ID         NUMBER(6)     CONSTRAINTS ACC_ID_PK PRIMARY KEY,
ACC_BAL        NUMBER(20)    CONSTRAINTS ACC_BAL_CH CHECK (ACC_BAL >= 0),
ACC_DATE       DATE,
ACC_COUNT      NUMBER(6)     CONSTRAINTS ACC_COUNT_CH CHECK (ACC_COUNT >= 0),
CUS_ID         NUMBER(6)     
);

ALTER TABLE ACCOUNT_TABLE
ADD CONSTRAINT CUS_ID_FK FOREIGN KEY(CUS_ID)
    REFERENCES CUSTOMER_MGR (CUS_ID);

//시퀀스명 ACC_ID_NUM

CREATE SEQUENCE ACC_ID_NUM
MINVALUE 1      
MAXVALUE 9999999999
INCREMENT BY 10      
START WITH 10000      
NOCACHE      
NOORDER      
NOCYCLE; 

CREATE TABLE ACCIO_TABLE
(
ACCIO_ID            NUMBER(6)     CONSTRAINTS ACCIO_ID_PK PRIMARY KEY,
ACC_ID              NUMBER(6),                 
ACCIO_INPUT         NUMBER(20)    CONSTRAINTS ACCIO_INPUT_CH CHECK (ACCIO_INPUT > 0),
ACCIO_OUTPUT        NUMBER(20)    CONSTRAINTS ACCIO_OUTPUT_CH CHECK (ACCIO_OUTPUT > 0),
ACCIO_BAL           NUMBER(20)    CONSTRAINTS ACCIO_BAL_CH CHECK (ACCIO_BAL >= 0),
ACCIO_DATE          DATE          
);

ALTER TABLE ACCIO_TABLE
ADD CONSTRAINT ACC_ID_FK FOREIGN KEY(ACC_ID)
    REFERENCES ACCOUNT_TABLE (ACC_ID);

//시퀀스명 ACCIO_ID_NUM


CREATE SEQUENCE ACCIO_ID_NUM
MINVALUE 1      
MAXVALUE 9999999999
INCREMENT BY 1   
START WITH 1      
NOCACHE      
NOORDER      
NOCYCLE;